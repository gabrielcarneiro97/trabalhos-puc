%%
%% Customizações do abnTeX2 (http://abnTeX2.googlecode.com) para a Universidade XXXX
%%
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
%% This work has the LPPL maintenance status `maintained'.
%% 
%% The Current Maintainer of this work is SEU_NOME, SEU_EMAIL
%%
%% Further information about abnTeX2 are available on https://github.com/abntex/abntex2
%%
\ProvidesPackage{abnt-puc}[2018/11/20 Pacote com algumas exigências da PUC-Minas]

% ---
% INICIO DAS CUSTOMIZACOES PARA A UNIVERSIDADE PUC MINAS
% ---
\usepackage{scrextend}
\usepackage{titlesec}
% ---
% Pacotes básicos 
% ---
\usepackage{lmodern}			% Usa a fonte Latin Modern			
\usepackage[T1]{fontenc}		% Selecao de codigos de fonte.
\usepackage[utf8]{inputenc}		% Codificacao do documento (conversão automática dos acentos)
\usepackage{indentfirst}		% Indenta o primeiro parágrafo de cada seção.
\usepackage{color}				% Controle das cores
\usepackage{graphicx}			% Inclusão de gráficos
\usepackage{microtype} 			% para melhorias de justificação

\DisemulatePackage{setspace}
\usepackage{setspace}
% ---

% ---
% Pacotes de citações
% ---
\usepackage[brazilian,hyperpageref]{backref}	 % Paginas com as citações na bibl
\usepackage[alf]{abntex2cite}	% Citações padrão ABNT

% --- 
% CONFIGURAÇÕES DE PACOTES
% --- 

% ---
% Configurações do pacote backref
% Usado sem a opção hyperpageref de backref
\renewcommand{\backrefpagesname}{Citado na(s) página(s):~}
% Texto padrão antes do número das páginas
\renewcommand{\backref}{}
% Define os textos da citação
\renewcommand*{\backrefalt}[4]{
	\ifcase #1 %
		Nenhuma citação no texto.%
	\or
		Citado na página #2.%
	\else
		Citado #1 vezes nas páginas #2.%
	\fi}%
% ---

% --- 
% Espaçamentos entre linhas e parágrafos 
% ---

% Espaçamentos entre linhas e parágrafos 

% O tamanho do parágrafo é dado por:
\setlength{\parindent}{1.3cm}

% Controle do espaçamento entre um parágrafo e outro:
\setlength{\parskip}{0.2cm}  % tente também \onelineskip
% ---

\providecommand{\imprimirareaconcentracao}{}
\newcommand{\areaconcentracao}[1]{\renewcommand{\imprimirareaconcentracao}{#1}}

\providecommand{\imprimirsubtitulo}{}
\newcommand{\subtitulo}[1]{\renewcommand{\imprimirsubtitulo}{#1}}

\providecommand{\imprimircurso}{}
\newcommand{\curso}[1]{\renewcommand{\imprimircurso}{#1}}

\providecommand{\imprimircursotipo}{}
\newcommand{\cursotipo}[1]{\renewcommand{\imprimircursotipo}{#1}}

\providecommand{\imprimircampus}{}
\newcommand{\campus}[1]{\renewcommand{\imprimircampus}{#1}}

\newcommand{\imprimirareaconcentracaoRotulo}{Área de concentração: }

\renewcommand{\imprimirtitulo}{\MakeUppercase\thetitle}

\renewcommand{\ABNTEXpartfont}{\rmfamily}
\renewcommand{\ABNTEXpartfontsize}{\normalsize}

\renewcommand{\ABNTEXchapterfont}{\normalfont\bfseries\normalsize}
\renewcommand{\ABNTEXchapterfontsize}{\normalsize}

\titleformat*{\section}{\bfseries\rmfamily\normalsize}

\renewcommand{\ABNTEXsubsectionfont}{\rmfamily}
\renewcommand{\ABNTEXsubsectionfontsize}{\normalsize}

\renewcommand{\ABNTEXsubsubsectionfont}{\rmfamily}
\renewcommand{\ABNTEXsubsubsectionfontsize}{\normalsize}

\renewcommand{\ABNTEXsubsubsubsectionfont}{\rmfamily}
\renewcommand{\ABNTEXsubsubsubsectionfontsize}{\normalsize}

\addto\captionsbrazil{% portugues-brasil
  %% ajusta nomes padroes do babel
  \renewcommand{\contentsname}{SUMÁRIO}
  \renewcommand{\bibname}{REFERÊNCIAS}
  \renewcommand{\indexname}{ÍNDICE}
  \renewcommand{\listfigurename}{LISTA DE ILUSTRAÇÕES}
  \renewcommand{\listtablename}{LISTA DE TABELAS}
  %% ajusta nomes usados com a macro \autoref
  \renewcommand{\pageautorefname}{PÁGINA}
  \renewcommand{\sectionautorefname}{SEÇÃO}
  \renewcommand{\subsectionautorefname}{SUBSEÇÃO}
  \renewcommand{\subsubsectionautorefname}{SUBSEÇÃO}
  \renewcommand{\paragraphautorefname}{SUBSEÇÃO}
}

% alterando a capa
\renewcommand{\imprimircapa}{
  \begin{capa}
    \center
    \imprimirinstituicao\par
    \abntex@ifnotempty{\imprimircursotipo}{\imprimircursotipo}
    \abntex@ifnotempty{\imprimircurso}{ em \imprimircurso}
    \abntex@ifnotempty{\imprimircampus}{ - Campus \imprimircampus}
    
    \vspace*{1cm}
    
    \imprimirautor

    \vfill
    \begin{center}
      {\setstretch{1.5}
        \textbf\imprimirtitulo
        \abntex@ifnotempty{\imprimirsubtitulo}{
          :\par\textbf\imprimirsubtitulo
        }
      }
    \end{center}

    \vspace*{\fill}
    
    {\large\imprimirlocal}

    \par

    {\large\imprimirdata}
    \vspace*{1cm}
  \end{capa}
}


% folha de rosto 

\renewcommand{\folhaderostocontent}{
  \begin{center}
    \center
        
    \imprimirautor

    \vfill
    \begin{center}
      {\setstretch{1.5}
        \textbf\imprimirtitulo
        \abntex@ifnotempty{\imprimirsubtitulo}{
          :\par\textbf\imprimirsubtitulo
        }
      }
    \end{center}
    \vfill

    \abntex@ifnotempty{\imprimirpreambulo}{
      \hspace{.45\textwidth}
      \begin{addmargin}[7cm]{0cm}
        {\setstretch{1.0}
          \imprimirpreambulo\par
        }
        \abntex@ifnotempty{\imprimirorientador}{
          \vspace*{.5cm}
          {\imprimirorientadorRotulo~\imprimirorientador\par}
        }
        
        \abntex@ifnotempty{\imprimircoorientador}{
          \vspace*{.5cm}
          {\imprimircoorientadorRotulo~\imprimircoorientador\par}
        }

        \abntex@ifnotempty{\imprimirareaconcentracao}{
          \vspace*{.5cm}
          {\imprimirareaconcentracaoRotulo~\imprimirareaconcentracao\par}
        }
      \end{addmargin}
      \vspace*{\fill}
    }

    \vspace*{\fill}
    
    {\large\imprimirlocal}

    \par

    {\large\imprimirdata}
    \vspace*{1cm}
  \end{center}
}

% ---
% FIM DAS CUSTOMIZACOES PARA A UNIVERSIDADE PUC MINAS
% ---